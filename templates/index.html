{% extends "layout.html" %}

{% block content %}
<style>
    /* HERO LAYOUT */
    .hero-wrapper {
        min-height: 85vh;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        text-align: center;
        padding-top: 60px; /* Offset for header */
    }
    
    /* ANIMATED BLOBS */
    .blob {
        position: absolute;
        width: 600px;
        height: 600px;
        border-radius: 50%;
        opacity: 0.4;
        filter: blur(80px);
        z-index: -1;
        animation: float 10s infinite;
    }
    @keyframes float { 
        0% { transform: translate(0,0); } 
        50% { transform: translate(20px, -40px); } 
        100% { transform: translate(0,0); } 
    }

    /* TYPOGRAPHY */
    .hero-title {
        font-size: 4.5rem;
        font-weight: 900;
        color: var(--text-main);
        margin-bottom: 30px;
        line-height: 1.1;
    }

    /* --- THE "AIRBNB" ANIMATION STYLES --- */
    .hero-sentence {
        font-size: 1.8rem;
        color: var(--text-muted);
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap; /* Wraps nicely on mobile */
        margin-bottom: 50px;
    }

    .ticker-container {
        height: 110px; /* Fixed height for the box */
        width: 140px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
        border: 1px solid rgba(0,0,0,0.05);
        overflow: hidden;
        position: relative;
        display: inline-block;
        vertical-align: middle;
    }

    .ticker-wrapper {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        /* JS will animate this 'transform' property */
        transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    .ticker-item {
        height: 110px; /* Matches container */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: var(--primary);
    }

    .ticker-icon { font-size: 2.5rem; margin-bottom: 5px; }
    .ticker-price { font-size: 1.4rem; font-weight: 800; color: var(--text-main); }
    
    /* VALUE PROPS GRID */
    .grid-split { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; margin: 100px 0; }
    .what-we-offer-section + .grid-split { margin-top: 40px; }
    .visual-block { height: 400px; background: #e2e8f0; border-radius: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #94a3b8; }

    /* Ready to sell card */
    .ready-to-sell-card {
        text-align: center;
        padding: 50px 30px;
        max-width: 560px;
        margin: 0 auto 80px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .ready-to-sell-card h2 {
        font-size: 2rem;
        margin-bottom: 24px;
    }
    .ready-to-sell-cta {
        display: flex;
        justify-content: center;
    }
    .ready-to-sell-cta .btn {
        padding: 14px 28px;
        font-size: 1rem;
    }
    .ready-to-sell-or {
        display: block;
        color: var(--text-muted);
        font-size: 0.9rem;
        margin: 20px 0 16px;
    }
    .ready-to-sell-form {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    .ready-to-sell-form input {
        width: 200px;
        padding: 14px 16px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1rem;
    }
    .ready-to-sell-form button {
        padding: 14px 24px;
        font-size: 1rem;
    }
    .ready-to-sell-subtext {
        margin-top: 20px;
        font-size: 0.9rem;
        color: var(--text-muted);
    }
    .ready-to-sell-subtext a {
        color: var(--primary);
    }

    .testimonial-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px -8px rgba(6, 78, 59, 0.12);
    }

    /* Testimonials: distinct block to stand out from value props */
    .testimonials-section {
        margin: 100px -20px 80px;
        padding: 70px 40px 80px;
        background: linear-gradient(180deg, rgba(6, 78, 59, 0.04) 0%, rgba(6, 78, 59, 0.08) 100%);
        border-top: 2px solid rgba(6, 78, 59, 0.12);
        border-bottom: 2px solid rgba(6, 78, 59, 0.12);
    }
    .testimonials-section h2 {
        font-size: 2.25rem !important;
    }

    /* What we offer carousel (Neighbor-style) */
    .what-we-offer-section {
        padding: 24px 20px 32px;
        margin: 0 -20px;
        text-align: center;
        background: linear-gradient(180deg, rgba(6, 78, 59, 0.06) 0%, rgba(6, 78, 59, 0.02) 100%);
        border-top: 1px solid rgba(6, 78, 59, 0.1);
        border-bottom: 1px solid rgba(6, 78, 59, 0.1);
        border-radius: 12px;
    }
    .what-we-offer-section h2 {
        font-size: 2.25rem;
        color: var(--text-main);
        margin-bottom: 8px;
    }
    .what-we-offer-subtitle {
        font-size: 1.1rem;
        color: var(--text-muted);
        margin-bottom: 20px;
    }
    .what-we-offer-subtitle a {
        color: var(--primary);
        text-decoration: none;
    }
    .what-we-offer-subtitle a:hover {
        text-decoration: underline;
    }
    .carousel-track {
        overflow: hidden;
        width: 100%;
    }
    .carousel-inner {
        display: flex;
        gap: 16px;
        animation: carousel-scroll 35s linear infinite;
        width: max-content;
    }
    @media (prefers-reduced-motion: reduce) {
        .carousel-inner {
            animation: none;
        }
    }
    @keyframes carousel-scroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    .carousel-card {
        width: 200px;
        flex-shrink: 0;
        border-radius: 16px;
        box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
        position: relative;
        overflow: hidden;
        aspect-ratio: 280 / 400;
    }
    .carousel-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    @media (max-width: 768px) { 
        .grid-split { grid-template-columns: 1fr; } 
        .hero-title { font-size: 3rem; } 
        .hero-sentence { font-size: 1.4rem; }
        .hero-wrapper {
            min-height: calc(100vh - 120px); /* Extend to fill below compact header */
            padding-top: 20px;
        }
        .ready-to-sell-form { width: 100%; max-width: 300px; }
        .ready-to-sell-form input { flex: 1; min-width: 0; }
        /* Store section responsive */
        .store-info-grid {
            grid-template-columns: 1fr !important;
            gap: 30px !important;
        }
        /* Testimonials responsive */
        .testimonials-section { margin: 60px -16px 50px; padding: 50px 30px 60px; }
        .testimonials-grid { grid-template-columns: 1fr !important; }
        /* Carousel responsive */
        .what-we-offer-section { padding: 20px 15px 24px; margin: 0 -15px; }
        .what-we-offer-section h2 { font-size: 1.75rem; margin-bottom: 24px; }
        .carousel-card { width: 160px; }
        .carousel-inner { gap: 12px; }
    }
</style>

<div class="hero-wrapper">
    <div class="blob" style="background: #bbf7d0; top: -10%; left: -10%;"></div>
    <div class="blob" style="background: #fde68a; bottom: -10%; right: -10%; animation-delay: -5s;"></div>

    <div style="max-width: 900px; padding: 20px;">
        
        <p class="reveal fade-up" style="font-size: 1rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 12px;">Campus Swap</p>
        <h1 class="hero-title reveal fade-up">
            Move Out.<br>
            <span style="color: var(--primary);">Cash In.</span>
        </h1>
        <p class="reveal fade-up" style="font-size: 1.1rem; color: var(--text-muted); margin-bottom: 30px;">Turn move-out into cash.</p>
        
        <div class="hero-sentence reveal fade-up" style="animation-delay: 0.2s;">
            <span>You could make</span>
            
            <div class="ticker-container">
                <div class="ticker-wrapper" id="ticker">
                    </div>
            </div>
            
            <span>selling your stuff.</span>
        </div>

        <div class="reveal fade-up" style="animation-delay: 0.4s;">
            <a href="{{ url_for('onboard') }}" class="btn btn-primary" style="padding: 18px 45px; font-size: 1.2rem; border-radius: 50px;">
                Start Selling <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</div>

<div class="container">
    <section class="what-we-offer-section reveal fade-up">
        <h2>What we offer</h2>
        <p class="what-we-offer-subtitle"><a href="{{ url_for('inventory') }}">Shop great deals on furniture / appliances in our inventory page</a></p>
        <div class="carousel-track">
            <div class="carousel-inner">
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/couch.png') }}" alt="Couch"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/futon.png') }}" alt="Futon"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/mattress.png') }}" alt="Mattress"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/rug.png') }}" alt="Rug"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/minifridge.png') }}" alt="Mini fridge"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/microwave.png') }}" alt="Microwave"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/tv.png') }}" alt="TV"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/ACunit.png') }}" alt="AC unit"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/heater.png') }}" alt="Heater"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/xbox.png') }}" alt="Xbox"></div>
                <!-- Duplicate set for seamless loop -->
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/couch.png') }}" alt="Couch"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/futon.png') }}" alt="Futon"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/mattress.png') }}" alt="Mattress"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/rug.png') }}" alt="Rug"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/minifridge.png') }}" alt="Mini fridge"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/microwave.png') }}" alt="Microwave"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/tv.png') }}" alt="TV"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/ACunit.png') }}" alt="AC unit"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/heater.png') }}" alt="Heater"></div>
                <div class="carousel-card"><img src="{{ url_for('static', filename='CarouselPics/xbox.png') }}" alt="Xbox"></div>
            </div>
        </div>
    </section>

    <div class="grid-split">
        <div class="reveal slide-left">
            <i class="fas fa-camera" style="font-size: 2.5rem; color: var(--accent); margin-bottom: 20px;"></i>
            <h2 style="font-size: 2.5rem;">Snap & Relax.</h2>
            <p style="font-size: 1.1rem; color: var(--text-muted);">
                Let’s face it: you’re not going to sell your mini-fridge before move-out. Don’t waste time on Facebook Marketplace. Snap a photo of your furniture and appliances, and we’ll handle the rest.            </p>
        </div>
        <div class="visual-block reveal slide-right" style="background: #f1f5f9; position: relative; overflow: hidden;">
    <div style="position: absolute; bottom: 80px; left: 60px;">
        <div style="width: 120px; height: 50px; background: var(--primary); border-radius: 12px;"></div> <div style="width: 25px; height: 45px; background: var(--primary-light); position: absolute; top: -15px; left: -5px; border-radius: 8px;"></div> <div style="width: 25px; height: 45px; background: var(--primary-light); position: absolute; top: -15px; right: -5px; border-radius: 8px;"></div> <div style="width: 100px; height: 60px; background: var(--primary-light); position: absolute; top: -40px; left: 10px; border-radius: 12px; z-index: -1;"></div> </div>

    <div id="photographer" style="position: absolute; bottom: 80px; right: 80px; width: 40px; height: 100px;">
        <div style="width: 22px; height: 22px; border: 3px solid #334155; border-radius: 50%; position: absolute; top: 0; left: 9px;"></div> <div style="width: 4px; height: 40px; background: #334155; border-radius: 4px; position: absolute; top: 20px; left: 18px;"></div> <div style="width: 4px; height: 35px; background: #334155; border-radius: 4px; position: absolute; bottom: 0; left: 8px; transform: rotate(15deg); transform-origin: top;"></div>
        <div style="width: 4px; height: 35px; background: #334155; border-radius: 4px; position: absolute; bottom: 0; right: 8px; transform: rotate(-15deg); transform-origin: top;"></div>
        <div style="width: 24px; height: 4px; background: #334155; border-radius: 4px; position: absolute; top: 35px; left: -2px;"></div>
    </div>

    <div style="position: absolute; bottom: 135px; right: 105px; width: 24px; height: 16px; background: #0f172a; border-radius: 4px;">
        <div style="width: 8px; height: 8px; background: #94a3b8; border-radius: 50%; position: absolute; top: 4px; left: 8px;"></div>
        
        <div class="flash-lines" style="position: absolute; top: -15px; left: -10px; width: 40px; height: 20px; opacity: 0;">
            <div style="width: 2px; height: 8px; background: #f59e0b; position: absolute; left: 50%; top: 0; border-radius: 2px;"></div> <div style="width: 2px; height: 8px; background: #f59e0b; position: absolute; left: 10%; top: 5px; transform: rotate(-45deg); border-radius: 2px;"></div> <div style="width: 2px; height: 8px; background: #f59e0b; position: absolute; right: 10%; top: 5px; transform: rotate(45deg); border-radius: 2px;"></div> </div>
    </div>

    <style>
        /* ANIMATION: Flash & Jump */
        @keyframes flashJump {
            0%, 85% { transform: translateY(0) rotate(0deg); }
            90% { transform: translateY(-5px) rotate(-5deg); } /* Mini Jump */
            95% { transform: translateY(0) rotate(0deg); }
        }
        @keyframes linePop {
            0%, 89% { opacity: 0; transform: scale(0.5); }
            90% { opacity: 1; transform: scale(1.2); } /* Pop! */
            95% { opacity: 0; transform: scale(1.5); }
        }
        
        #photographer { animation: flashJump 3s infinite ease-in-out; }
        .flash-lines { animation: linePop 3s infinite; }
    </style>
</div>
    </div>

    <div class="grid-split">
        <div class="visual-block reveal slide-left" style="background: #e0f2fe; position: relative; overflow: hidden;">
    
    <div style="position: absolute; bottom: 0; width: 100%; height: 60px; background: #cbd5e1; border-top: 4px solid #94a3b8;"></div>

    <div style="position: absolute; bottom: 60px; left: 20px; width: 80px; height: 120px; background: #f87171; border-radius: 4px; display: grid; grid-template-columns: 1fr 1fr; padding: 5px; gap: 5px;">
        <div style="background: #fef2f2; height: 20px; border-radius: 2px;"></div><div style="background: #fef2f2; height: 20px; border-radius: 2px;"></div>
        <div style="background: #fef2f2; height: 20px; border-radius: 2px;"></div><div style="background: #fef2f2; height: 20px; border-radius: 2px;"></div>
        <div style="background: #fef2f2; height: 20px; border-radius: 2px;"></div><div style="background: #fef2f2; height: 20px; border-radius: 2px;"></div>
    </div>
    
    <div style="position: absolute; bottom: 60px; right: 20px; width: 100px; height: 80px; background: #64748b; border-radius: 4px 4px 0 0;">
        <div style="width: 60px; height: 40px; background: #475569; margin: 40px auto 0; border-radius: 4px 4px 0 0;"></div>
    </div>

    <div id="uhaul" style="position: absolute; bottom: 65px; left: 120px; width: 60px; height: 30px;">
        <div style="width: 40px; height: 30px; background: var(--primary); position: absolute; left: 0; border-radius: 3px;"></div>
        <div style="width: 30px; height: 4px; background: rgba(255,255,255,0.3); position: absolute; left: 5px; top: 12px;"></div>
        
        <div style="width: 20px; height: 20px; background: #cbd5e1; position: absolute; right: 0; bottom: 0; border-radius: 0 4px 0 0;"></div>
        <div style="width: 12px; height: 10px; background: #94a3b8; position: absolute; right: 2px; top: 2px; border-radius: 0 2px 0 0;"></div>
        
        <div style="width: 10px; height: 10px; background: #1e293b; border-radius: 50%; position: absolute; bottom: -5px; left: 5px; border: 2px solid #64748b;"></div>
        <div style="width: 10px; height: 10px; background: #1e293b; border-radius: 50%; position: absolute; bottom: -5px; right: 5px; border: 2px solid #64748b;"></div>
    </div>

    <style>
        /* ANIMATION: Drive Back and Forth */
        @keyframes driveLoop {
            0% { transform: translateX(0) scaleX(1); }
            45% { transform: translateX(180px) scaleX(1); } /* Drive Right */
            50% { transform: translateX(180px) scaleX(-1); } /* Flip (Turn Around) */
            95% { transform: translateX(0) scaleX(-1); } /* Drive Left */
            100% { transform: translateX(0) scaleX(1); } /* Flip Back */
        }
        #uhaul { animation: driveLoop 6s infinite linear; }
    </style>
</div>
        <div class="reveal slide-right">
            <i class="fas fa-box-open" style="font-size: 2.5rem; color: var(--accent); margin-bottom: 20px;"></i>
            <h2 style="font-size: 2.5rem;">Leave in May. Get Paid All Summer.</h2>
            <p style="font-size: 1.1rem; color: var(--text-muted);">
                You leave in May. Buyers don't. Students arrive all summer and into next semester, and they need what you're leaving behind. We pick up your items, bring them to our retail store near campus, and list them on our online storefront so they're selling 24/7, in-store and online, for three months (June 1–August 31). No dumping. No waiting around. We handle everything.
            </p>
        </div>
    </div>

    <div class="grid-split">
        <div class="reveal slide-left">
            <i class="fas fa-scale-balanced" style="font-size: 2.5rem; color: var(--accent); margin-bottom: 20px;"></i>
            <h2 style="font-size: 2.5rem;">Better Than Storage. Smarter Than Facebook.</h2>
            <p style="font-size: 1.1rem; color: var(--text-muted);">
                A storage unit costs you money all summer with nothing to show for it. Facebook Marketplace means strangers, no-shows, and hauling stuff yourself during the most hectic week of your year. With us, you make money instead of spending it — and we do all the heavy lifting. No fees upfront, no coordination headaches, no regrets.
            </p>
        </div>
        <div class="visual-block reveal slide-right" style="background: #f1f5f9; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; padding: 20px;">
            <img src="{{ url_for('static', filename='thirdPic.png') }}" alt="Storage costs money, selling yourself is frustrating, we handle it" style="max-width: 100%; max-height: 100%; object-fit: contain;">
        </div>
    </div>

    <div class="reveal fade-up" style="text-align: center; margin: 60px 0 80px;">
        <p style="font-size: 1.25rem; color: var(--text-muted); margin-bottom: 16px;">Curious how it all works?</p>
        <a href="{{ url_for('become_a_seller') }}" class="btn btn-primary" style="padding: 14px 28px; font-size: 1rem;">
            Learn more about becoming a seller <i class="fas fa-arrow-right"></i>
        </a>
    </div>
</div>

    <section class="testimonials-section reveal fade-up">
        <div style="text-align: center; margin-bottom: 50px;">
            <h2 style="font-size: 2rem; color: var(--text-main); margin-bottom: 10px;">What Students Say</h2>
            <p style="color: var(--text-muted); font-size: 1.05rem;">Real experiences from Campus Swap sellers</p>
        </div>
        <div class="testimonials-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; max-width: 900px; margin: 0 auto;">
            <div class="testimonial-card" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 16px; padding: 28px; transition: transform 0.2s, box-shadow 0.2s;">
                <div style="color: var(--accent); font-size: 1.5rem; margin-bottom: 12px;">&ldquo;</div>
                <p style="color: var(--text-main); font-size: 1rem; line-height: 1.6; margin: 0 0 20px;">I was dreading trying to sell my mini fridge on Facebook. Campus Swap picked it up on move-out day and I got paid $65 when it sold. So easy.</p>
                <div style="font-weight: 600; color: var(--primary); font-size: 0.95rem;">Andrew T.</div>
                <div style="font-size: 0.85rem; color: var(--text-muted);">Davidson College &rsquo;25</div>
            </div>
            <div class="testimonial-card" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 16px; padding: 28px; transition: transform 0.2s, box-shadow 0.2s;">
                <div style="color: var(--accent); font-size: 1.5rem; margin-bottom: 12px;">&ldquo;</div>
                <p style="color: var(--text-main); font-size: 1rem; line-height: 1.6; margin: 0 0 20px;">Dropped off my futon and desk at their pod. Zero hassle. Venmo hit a few weeks later. Way better than leaving stuff on the curb.</p>
                <div style="font-weight: 600; color: var(--primary); font-size: 0.95rem;">Henry R.</div>
                <div style="font-size: 0.85rem; color: var(--text-muted);">Davidson College &rsquo;25</div>
            </div>
            <div class="testimonial-card" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 16px; padding: 28px; transition: transform 0.2s, box-shadow 0.2s;">
                <div style="color: var(--accent); font-size: 1.5rem; margin-bottom: 12px;">&ldquo;</div>
                <p style="color: var(--text-main); font-size: 1rem; line-height: 1.6; margin: 0 0 20px;">The service fee was totally worth it. They came to my house, loaded everything, and I didn&rsquo;t have to deal with random Marketplace buyers. 10/10.</p>
                <div style="font-weight: 600; color: var(--primary); font-size: 0.95rem;">Jack P.</div>
                <div style="font-size: 0.85rem; color: var(--text-muted);">Davidson College &rsquo;26</div>
            </div>
        </div>
    </section>

    <div id="join" class="card reveal fade-up ready-to-sell-card">
        <h2>Ready to sell?</h2>
        <div class="ready-to-sell-cta">
            <a href="/become-a-seller" class="btn btn-primary">Learn more <i class="fas fa-arrow-right"></i></a>
        </div>
        {% if google_oauth_enabled %}
        <span class="ready-to-sell-or">or</span>
        <a href="/auth/google" class="btn-google" style="margin-bottom: 16px; max-width: 320px; margin-left: auto; margin-right: auto; display: flex;">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            Sign in with Google
        </a>
        {% endif %}
        <span class="ready-to-sell-or">or</span>
        <form method="POST" class="ready-to-sell-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <input type="email" name="email" placeholder="student@college.edu" required>
            {% if turnstile_site_key %}
            <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
            <div class="cf-turnstile" data-sitekey="{{ turnstile_site_key }}" style="margin: 16px auto; display: flex; justify-content: center;"></div>
            {% endif %}
            <button type="submit" class="btn btn-primary">{% if pickup_period_active %}Create Account{% else %}Get Notified{% endif %}</button>
        </form>
        <p class="ready-to-sell-subtext">{% if pickup_period_active %}Seller spots are limited. <a href="/become-a-seller">Learn more</a>{% else %}We&rsquo;ll email you when signups open next year.{% endif %}</p>
    </div>
</div>

<script>
    // 1. SCROLL REVEAL LOGIC
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('active'); });
    });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    // 2. TICKER ANIMATION LOGIC (icons from admin category settings)
    const items = {{ ticker_items | tojson | safe }};

    const wrapper = document.getElementById('ticker');
    
    // Build the HTML for the list
    // We duplicate the first item at the end to make the loop seamless
    let html = '';
    items.forEach(item => {
        html += `
        <div class="ticker-item">
            <i class="fas ${item.icon} ticker-icon"></i>
            <div class="ticker-price">${item.price}</div>
        </div>`;
    });
    // Add the first one again at the bottom for seamless loop
    html += `
        <div class="ticker-item">
            <i class="fas ${items[0].icon} ticker-icon"></i>
            <div class="ticker-price">${items[0].price}</div>
        </div>`;
    
    wrapper.innerHTML = html;

    // Animation Loop
    let currentIndex = 0;
    const itemHeight = 110; // Must match CSS height
    const totalItems = items.length;

    setInterval(() => {
        currentIndex++;
        
        // Slide up
        wrapper.style.transition = 'transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1)';
        wrapper.style.transform = `translateY(-${currentIndex * itemHeight}px)`;

        // Reset if we hit the clone at the end
        if (currentIndex === totalItems) {
            setTimeout(() => {
                wrapper.style.transition = 'none'; // Instant jump (no animation)
                currentIndex = 0;
                wrapper.style.transform = `translateY(0px)`;
            }, 500); // Wait for the slide to finish before resetting
        }
    }, 2500); // Change every 2.5 seconds
</script>
{% endblock %}